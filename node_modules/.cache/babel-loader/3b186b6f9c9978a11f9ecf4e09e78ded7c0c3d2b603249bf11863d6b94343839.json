{"ast":null,"code":"import React,{useEffect,useRef}from\"react\";import{useDispatchCart,useCart}from\"./ContextReducer\";import{useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Card(props){let dispatch=useDispatchCart();let data=useCart();const priceRef=useRef();let options=props.options;let priceOptions=Object.keys(options);const[qty,setQty]=useState(1);const[size,setSize]=useState(\"\");// let foodItem = props.foodItems;\nconst handleAddToCart=async()=>{let food=[];for(const item of data){if(item.id===props.foodItem._id){food=item;break;}}if(food!=[]){if(food.size===size){await dispatch({type:\"UPDATE\",id:props.foodItem._id,price:finalPrice,qty:qty});return;}else if(food.size!==size){await dispatch({type:\"ADD\",id:props.foodItem._id,name:props.foodItem.name,price:finalPrice,qty:qty,size:size// img: props.ImgSrc,\n});// console.log(\"Size different so simply ADD one more to the list\");\nreturn;}return;}await dispatch({type:\"ADD\",id:props.foodItem._id,name:props.foodItem.name,price:finalPrice,qty:qty,size:size});console.log(data);};let finalPrice=qty*parseInt(options[size]);useEffect(()=>{setSize(priceRef.current.value);},[]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card mt-3\",style:{width:\"16rem\",maxHeight:\"360px\"// justifyContent: \"center\",\n},children:[/*#__PURE__*/_jsx(\"img\",{src:props.foodItem.img,className:\"card-img-top\",alt:\"  \",style:{height:\"120px\",objectFit:\"fill\"}}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body bg-dark text-light rounded \",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:props.foodItem.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"container w-100 d-flex \",style:{justifyContent:\"center\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"select\",{className:\"m-2 h-100  bg-success rounded\",onChange:e=>setQty(e.target.value),children:Array.from(Array(6),(e,i)=>{return/*#__PURE__*/_jsx(\"option\",{value:i+1,children:i+1},i+1);})}),/*#__PURE__*/_jsx(\"select\",{className:\"m-2 h-100 bg-success rounded \"// style={{ display: \"flex\" }}\n,ref:priceRef,onChange:e=>setSize(e.target.value),children:priceOptions.map(data=>{return/*#__PURE__*/_jsx(\"option\",{value:data,children:data},data);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-inline h-100 fs-5\",children:[\" Rs.\",finalPrice,\"/- \"]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger justify-center ms-2\",onClick:handleAddToCart,children:\"Add to Cart\"})]})]})})});}","map":{"version":3,"names":["React","useEffect","useRef","useDispatchCart","useCart","useState","jsx","_jsx","jsxs","_jsxs","Card","props","dispatch","data","priceRef","options","priceOptions","Object","keys","qty","setQty","size","setSize","handleAddToCart","food","item","id","foodItem","_id","type","price","finalPrice","name","console","log","parseInt","current","value","children","className","style","width","maxHeight","src","img","alt","height","objectFit","justifyContent","alignItems","onChange","e","target","Array","from","i","ref","map","onClick"],"sources":["E:/food-master-main/food-master-main/src/components/Card.js"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\nimport { useDispatchCart, useCart } from \"./ContextReducer\";\nimport { useState } from \"react\";\n\nexport default function Card(props) {\n  let dispatch = useDispatchCart();\n  let data = useCart();\n  const priceRef = useRef();\n  let options = props.options;\n  let priceOptions = Object.keys(options);\n  const [qty, setQty] = useState(1);\n  const [size, setSize] = useState(\"\");\n\n  // let foodItem = props.foodItems;\n  const handleAddToCart = async () => {\n    let food = [];\n    for (const item of data) {\n      if (item.id === props.foodItem._id) {\n        food = item;\n\n        break;\n      }\n    }\n\n    if (food != []) {\n      if (food.size === size) {\n        await dispatch({\n          type: \"UPDATE\",\n          id: props.foodItem._id,\n          price: finalPrice,\n          qty: qty,\n        });\n        return;\n      } else if (food.size !== size) {\n        await dispatch({\n          type: \"ADD\",\n          id: props.foodItem._id,\n          name: props.foodItem.name,\n          price: finalPrice,\n          qty: qty,\n          size: size,\n          // img: props.ImgSrc,\n        });\n        // console.log(\"Size different so simply ADD one more to the list\");\n        return;\n      }\n      return;\n    }\n\n    await dispatch({\n      type: \"ADD\",\n      id: props.foodItem._id,\n      name: props.foodItem.name,\n      price: finalPrice,\n      qty: qty,\n      size: size,\n    });\n    console.log(data);\n  };\n  let finalPrice = qty * parseInt(options[size]);\n  useEffect(() => {\n    setSize(priceRef.current.value);\n  }, []);\n\n  return (\n    <div>\n      <div>\n        <div\n          className=\"card mt-3\"\n          style={{\n            width: \"16rem\",\n            maxHeight: \"360px\",\n            // justifyContent: \"center\",\n          }}\n        >\n          <img\n            src={props.foodItem.img}\n            className=\"card-img-top\"\n            alt=\"  \"\n            style={{ height: \"120px\", objectFit: \"fill\" }}\n          />\n          <div className=\"card-body bg-dark text-light rounded \">\n            <h5 className=\"card-title\">{props.foodItem.name}</h5>\n            {/* <p className=\"card-text\">Some quick example text to b</p> */}\n            <div\n              className=\"container w-100 d-flex \"\n              style={{ justifyContent: \"center\", alignItems: \"center\" }}\n            >\n              <select\n                className=\"m-2 h-100  bg-success rounded\"\n                onChange={(e) => setQty(e.target.value)}\n              >\n                {Array.from(Array(6), (e, i) => {\n                  return (\n                    <option key={i + 1} value={i + 1}>\n                      {i + 1}\n                    </option>\n                  );\n                })}\n              </select>\n              <select\n                className=\"m-2 h-100 bg-success rounded \"\n                // style={{ display: \"flex\" }}\n                ref={priceRef}\n                onChange={(e) => setSize(e.target.value)}\n              >\n                {priceOptions.map((data) => {\n                  return (\n                    <option key={data} value={data}>\n                      {data}\n                    </option>\n                  );\n                })}\n              </select>\n              <div className=\"d-inline h-100 fs-5\"> Rs.{finalPrice}/- </div>\n            </div>\n            <hr />\n\n            <button\n              className={`btn btn-danger justify-center ms-2`}\n              onClick={handleAddToCart}\n            >\n              Add to Cart\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}